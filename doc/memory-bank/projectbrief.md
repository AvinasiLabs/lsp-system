# Project Brief: LSP积分系统

## 项目概述
LSP (Longevity Score Points) 积分系统是一个基于健康数据的激励平台，通过分析用户的健康行为数据（主要来自iOS HealthKit），根据科学的长寿因素评估规则，为用户的健康行为提供积分奖励，从而激励用户养成更健康的生活方式。

## 核心目标
1. **对平台**：通过积分机制留住用户，建立用户粘性
2. **对用户**：让用户能够获得想象中更大的收益，激励健康行为

## 项目范围

### 必须实现的功能
1. **数据采集与存储**
   - 从iOS HealthKit导入健康数据
   - 支持多种健康数据类型（睡眠、运动、饮食、生理指标等）
   - 安全可靠的数据存储方案

2. **积分计算引擎**
   - 基于LSP积分规则的计算逻辑
   - 支持易、中、难、超难等不同难度等级
   - 实时积分计算与更新

3. **用户等级系统**
   - Bronze、Silver、Gold、Platinum、Diamond、Ambassador六个等级
   - 等级解锁条件和福利机制
   - 积分过期与倍数机制

4. **行为激励机制**
   - 连锁失去反应行为
   - 超难任务奖励
   - 作弊行为检测与惩罚

### 未来扩展功能
1. 社交功能（accountable partner匹配）
2. 挑战系统（challenges）
3. 积分兑换系统
4. 科学家项目staking
5. 数据可视化仪表板

## 关键约束

### 技术约束
- 必须支持iOS HealthKit数据格式
- 需要处理大量时序数据（当前已有8万+条记录）
- 数据隐私和安全合规要求

### 业务约束
- 积分规则基于科学的长寿研究
- 需要防止作弊和数据造假
- 积分有时间限制和过期机制

## 成功标准
1. 能够准确计算用户的LSP积分
2. 系统能够处理并分析HealthKit导出的数据
3. 用户能够看到自己的积分和等级
4. 系统能够检测异常行为并做出响应

## 项目阶段

### Phase 1: 基础架构（当前）
- ✅ 数据库设计与实现
- ✅ HealthKit数据导入
- 🔄 积分计算引擎开发

### Phase 2: 核心功能
- 用户管理系统
- API接口开发
- 积分实时计算

### Phase 3: 增值功能
- 数据可视化
- 社交功能
- 挑战系统

## 关键决策
1. 使用PostgreSQL作为主数据库
2. Python作为后端开发语言
3. 基于LSP积分系统规则文档进行开发
4. 优先实现可从HealthKit获取的数据类型